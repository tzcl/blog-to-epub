all: clean fetch merge bind

clean:
	@echo "ðŸ—‘  Cleaning up..."
	rm -rf articles posts stopa.md stopa.epub

fetch:
	@echo "ðŸ§  Downloading articles from stopa.io..."
	pipenv install
	pipenv run python posts.py
	mkdir articles
	pipenv run python stopa.py

merge:
	@echo "ðŸŒª  Merging articles..."
	pandoc articles/*.md -o stopa.md -f markdown_strict

bind:
	@echo "ðŸ“’ Binding the EPUB... "
	pandoc articles/*.md -o stopa.epub -f markdown_strict --metadata-file=metadata.yaml --toc --toc-depth=1
	@echo "ðŸŽ‰ EPUB file created."
